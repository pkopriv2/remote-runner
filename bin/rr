#! /bin/bash -f

export rr_home=${rr_home:-$HOME/.rr}
export rr_host_home=${rr_host_home:-$rr_home/hosts}
export rr_archive_home=${rr_archive_home:-$rr_home/archives}
export rr_role_home=${rr_role_home:-$rr_home/roles}

source $rr_home/require.sh

declare -A globals
declare -A attributes

require "lib/msg.sh"

require "host.sh"
require "key.sh"
require "role.sh"
require "archive.sh"
require "run.sh"

IFS=$'\n'


help() {
	info "** Global Commands **"

	local subcommands=( run key host role archive )
	for cmd in "${subcommands[@]}" 
	do
		"$cmd"_help
		echo 
	done
}

args=($*)
action="${args[0]}"
shift

case "$action" in
	key|host|role|archive|run)
		"$action"_action "$@"
		;;
	*)
		help
		;;	
esac
